---
layout: post
title:  "OKHttp学习一：SPDY"
date:   2018-07-05 13:34:00 +0800
categories: Http
tags: OKHttp
author: pepe
description: 『 SPDY 』
---

# SPDY是什么？

> SPDY 是 Goole 开发的基于传输控制协议(TCP)的应用层协议。用以最小化网络延迟，提升网络速度，优化用户的网络使用体验。SPDY并不是一种用于替代HTTP的协议，而是对HTTP协议的增强。新协议的功能包括数据流的多路复用、请求优先级以及HTTP报头压缩。

![http_code]({{ site.baseurl }}/assets/images/Http/OkHttp/SPDY.png)

## 为什么要重新建立一个SPDY？

### **HTTP协议的不足**

* 1、单路连接 请求低效
HTTP最大的弊端就是每个TCP连接只能对应一个HTTP请求，即每个HTTP连接只能请求一个资源，浏览器只能通过建立多个连接来解决。此外在HTTP中对请求是严格的先入先出(FIFO)进行的，如果中间某个请求处理时间较长会阻塞后面的请求。

* 2、HTTP只允许由客户端主动发起请求
服务端只能等待客户端发送一个请求，在可以满足预加载的现状是一种桎梏。

* 3、HTTP头冗余
HTTP头在同一个回话里是反复发送的，中间的冗余信息，比如User-Agent、Host等不需要重复发送的信息也在反复发送，浪费宽带和资源。

### **SPDY协议的有点**

* 1、多路复用 请求优化
SPDY规定在一个SPDY连接内可以有无限个并行请求，即允许多个并发HTTP请求共用一个TCP会话。这样SPDY通过复用在单个TCP连接上的多次请求，而非为每个请求单独开放连接，这样只需要建立一个TCP连接就可以传送网页上所有资源，不仅可以减少消息交互往返的时间还可以避免创建新连接造成的延迟，使得TCP的效率更高。

    此外，SPDY的多路复用可以设置优先级，而不像传统HTTP那样严格按照先进先出一个一个处理请求，它会选择性的先传输CSS这样更重要的资源，然后再传输网站图标之类不太重要的资源，可以避免让非关键资源占用网络通道的问题，提升TCP的性能。

* 2、支持服务器推送技术
服务器可以主动向客户端发起通信向客户端推送数据，这种预加载可以使用户一直保持一个快速的网络。

* 3、SPDY压缩了HTTP头
舍弃掉了不必要的头信息，经过压缩之后可以节省多余数据传输所带来的等待时间和宽带。

* 4、强制使用SSL传输协议
Google认为Web未来的发展方向必定是安全的网络连接，全部请求SSL加密后，信息传输更加安全。

# **定位**

* 将页面加载时间减少50&
* 最大限度地减少部署的复杂性。SPDY使用TCP作为传输层，因此无需改变现有的网络设施。
* 避免网站开发者改动内容。支持SPDY唯一需要变化的是客户端代理和Web服务器应用程序。

# **具体技术目标**

* 单个TCP连接支持并发的HTTP请求
* 压缩报头和去掉不必要的头部来减少当前HTTP使用的带宽。
* 定义一个容易实现，在服务器端高效率的协议。通过减少边缘情况、定义易解析的消息格式来减少HTTP的复杂性。
* 强制使用`SSL`，让SSL协议在现存的网络设施下有更好的安全性和兼容性。
* 允许服务器在需要时发起对客户端的连接并推送数据。

# 其他

`互联网工程任务组（IETF）`对谷歌提出的SPDY协议进行了标准化，于2015年5推出了类似于SPDY协议的 HTTP 2.0 协议标准（简称HTTP/2）。谷歌因此宣布放弃对SPDY协议的支持，转而支持HTTP/2。





参考：

[SPDY_百度百科](https://baike.baidu.com/item/SPDY)

[SPDY协议 - 耳敏 - 博客园](http://www.cnblogs.com/keva/p/spdy-protocol.html)






























