---
layout: post
title:  "四、Handler使用中的内存泄漏"
date:   2018-07-14 10:30:00 +0800
categories: Android
tags: Handler
author: pepe
description: 『 Handler使用中的内存泄漏 』
---

```
// Handler的正确写法
import android.app.Activity;
import android.os.Handler;
import android.os.Message;
 
public abstract class MyWeakReferenceHandler<T extends Activity> extends Handler {
 
	private WeakReference<T> weakReferenceActivity = null;
 
	public MyWeakReferenceHandler(T t) {
		this.weakReferenceActivity = new WeakReference<T>(t);
	}
 
	public abstract void handleMessage(Message msg, T weakReferenceActivity);
 
	@Override
	public void handleMessage(Message msg) {
		// TODO Auto-generated method stub
		super.handleMessage(msg);
		handleMessage(msg, weakReferenceActivity.get());
	}

```



